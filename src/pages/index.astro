---
import Layout from "../layouts/Layout.astro";
let unlockFlag = false;

if (Astro.cookies.has("session")) {
    const headers = new Headers();
    headers.append("Cookie", Astro.cookies.get("session")!.value);
    const response = await fetch(Astro.url + "/api/verify", {
        method: "GET",
        headers: headers,
    });
    if (response.status === 200) {
        unlockFlag = true;
    } else {
        Astro.cookies.delete("session");
    }
}
---

<Layout title="Daniel Castillo: Solution Developer" unlockFlag={unlockFlag}>
    <main class="w-full mt-5">
        <div class="grid grid-cols-10 w-full divide-x divide-black/30 gap-4">
            <div class="col-span-7"></div>
            <div class="col-span-3 pl-4">
                {
                    unlockFlag ? (
                        <article class="border border-black/30 text-black/80 p-5 text-sm relative">
                            <h3 class="text-xl text-black">
                                Notes from the Editor
                            </h3>
                            <div class="my-3 flex gap-3 text-black">
                                <img
                                    src="/profile.jpg"
                                    class="rounded-full h-9 w-9"
                                    alt=""
                                />
                                <div>
                                    <strong class="text-sm">
                                        Daniel Castillo
                                    </strong>
                                    <p class="text-xs font-light">
                                        Writing from Colombia
                                    </p>
                                </div>
                            </div>
                            <p class="mb-4">
                                In this edition of Editor Notes, I'm thrilled to
                                introduce myselfâ€”Daniel, an enthusiastic
                                explorer in the captivating realm of
                                technology-driven problem-solving.
                            </p>
                            <p class="mb-4">
                                Just like a curious baby taking their first
                                steps, I'm navigating this exciting world, eager
                                to learn and grow.
                            </p>
                            <p class="mb-4">
                                I'm enthusiastic about collaborating on projects
                                that provide practical solutions, simplify
                                tasks, and enhance people's lives. It's about
                                making a positive impact, one project at a time.
                            </p>
                            <span class="absolute right-2 bottom-2 text-xs text-black/30 font-sans">
                                About Me
                            </span>
                        </article>
                    ) : (
                        <article class="border border-black/30 text-black/80 h-96 text-sm relative">
                            <span class="absolute right-2 bottom-2 text-xs text-black/30 font-sans">
                                About Me
                            </span>
                        </article>
                    )
                }
            </div>
        </div>
    </main>
</Layout>
